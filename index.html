<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEAR Staking - frutero.pool.near</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header fijo -->
    <header class="top-header">
        <div class="header-content">
            <div class="header-logo">
                <h1>NEAR Staking</h1>
            </div>
            <div class="header-wallet">
                <div id="header-disconnected" class="wallet-status">
                    <button id="connect-btn" class="btn btn-primary">Conectar Wallet</button>
                </div>
                <div id="header-connected" class="wallet-status" style="display: none;">
                    <div class="wallet-info">
                        <span class="wallet-label">Conectado:</span>
                        <strong id="header-account-id"></strong>
                        <button id="disconnect-btn" class="btn-icon" title="Desconectar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="banner-container">
            <img src="https://pbs.twimg.com/profile_banners/1626699336301129728/1706581872/1500x500" alt="Frutero Banner" class="banner-image">
        </div>

        <div class="hero-section">
            <h2 class="hero-title">Stake en frutero.pool.near</h2>
        </div>

        <main>
            <!-- Balance y estado -->
            <div id="account-info" class="card" style="display: none;">
                <h2>Informaci√≥n de Cuenta</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Balance Disponible en Wallet:</span>
                        <span id="available-balance" class="value">0 NEAR</span>
                    </div>
                </div>

                <div class="section-header">
                    <h3 class="section-title">üìà Staking en frutero.pool.near</h3>
                    <button id="reset-rewards-btn" class="btn-reset" title="Resetear el c√°lculo de recompensas usando el balance actual como base">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                        </svg>
                        Resetear Base
                    </button>
                </div>
                <div class="staking-summary">
                    <div class="staking-breakdown">
                        <div class="staking-item capital-item">
                            <div class="staking-label">
                                <span class="label-icon">üí∞</span>
                                <span class="label-text">Capital en Staking</span>
                            </div>
                            <span id="staked-balance" class="staking-value capital-value">0 NEAR</span>
                        </div>
                        <div class="staking-item rewards-item">
                            <div class="staking-label">
                                <span class="label-icon">‚ú®</span>
                                <span class="label-text">Recompensas Acumuladas</span>
                            </div>
                            <span id="rewards" class="staking-value rewards-value">0 NEAR</span>
                        </div>
                    </div>
                    <div class="staking-total">
                        <div class="total-label">
                            <span class="label-icon">üéØ</span>
                            <span class="label-text">Total en el Pool</span>
                        </div>
                        <span id="total-balance" class="total-value">0 NEAR</span>
                    </div>
                </div>
            </div>

            <!-- Formulario de staking -->
            <div id="staking-form" class="card" style="display: none;">
                <h2>Hacer Staking</h2>
                <div class="form-group">
                    <label for="stake-amount">Cantidad (NEAR):</label>
                    <input type="number" id="stake-amount" min="1" step="0.1" placeholder="Ej: 10">
                    <p class="help-text">M√≠nimo 1 NEAR para hacer staking</p>
                </div>
                <button id="stake-btn" class="btn btn-primary">Depositar y Hacer Staking</button>
            </div>

            <!-- Formulario de unstaking -->
            <div id="unstaking-form" class="card" style="display: none;">
                <h2>Retirar Staking</h2>
                <div class="form-group">
                    <label for="unstake-amount">Cantidad (NEAR):</label>
                    <input type="number" id="unstake-amount" min="0.1" step="0.1" placeholder="Ej: 5">
                    <p class="help-text">Retirar fondos en staking (disponibles despu√©s de 2-3 epochs)</p>
                </div>
                <button id="unstake-btn" class="btn btn-warning">Unstake</button>
                <button id="withdraw-btn" class="btn btn-success">Retirar Fondos Disponibles</button>
            </div>

            <!-- Mensajes -->
            <div id="message" class="message" style="display: none;"></div>

            <!-- Estad√≠sticas del Pool -->
            <div class="card stats-card">
                <h2>üìä Estad√≠sticas del Pool</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Total Delegado:</span>
                        <span id="pool-total-staked" class="stat-value">Cargando...</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">N√∫mero de Delegadores:</span>
                        <span id="pool-num-delegators" class="stat-value">Cargando...</span>
                    </div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #16213e;">Top 10 Delegadores</h3>
                <div id="delegators-list" class="delegators-list">
                    <p class="loading-text">Cargando delegadores...</p>
                </div>
            </div>

            <!-- Informaci√≥n del pool -->
            <div class="card info-card">
                <h2 id="pool-info-title">üìä Sobre frutero.pool.near</h2>
                <div class="info-content">
                    <p class="info-description">Pool de validaci√≥n NEAR profesional. Al hacer staking, tus tokens ayudan a asegurar la red y obtienes recompensas autom√°ticamente.</p>

                    <div class="info-benefits">
                        <div class="benefit-item">
                            <span class="benefit-icon">üí∞</span>
                            <div class="benefit-text">
                                <strong>Recompensas Autom√°ticas</strong>
                                <p>Las recompensas se componen autom√°ticamente cada epoch</p>
                            </div>
                        </div>

                        <div class="benefit-item">
                            <span class="benefit-icon">‚è±Ô∏è</span>
                            <div class="benefit-text">
                                <strong>Periodo de Unstaking</strong>
                                <p>El unstaking toma 2-3 epochs (aproximadamente 52-78 horas)</p>
                            </div>
                        </div>

                        <div class="benefit-item">
                            <span class="benefit-icon">üîê</span>
                            <div class="benefit-text">
                                <strong>Retiro Manual</strong>
                                <p>Despu√©s del unstaking, retira tus fondos manualmente cuando est√©n disponibles</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>NEAR Staking App - Red: <span id="network-name">mainnet</span></p>
            <p class="footer-credit">Desarrollado por <strong>Erik Valle</strong></p>
        </footer>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>
